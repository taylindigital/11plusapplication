{"version":3,"file":"TableServiceClient.js","sourceRoot":"","sources":["../../src/TableServiceClient.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport type {\n  GetPropertiesResponse,\n  GetStatisticsResponse,\n  ServiceProperties,\n  SetPropertiesOptions,\n  SetPropertiesResponse,\n} from \"./generatedModels.js\";\nimport type {\n  InternalClientPipelineOptions,\n  OperationOptions,\n  ServiceClientOptions,\n} from \"@azure/core-client\";\nimport type {\n  ListTableItemsOptions,\n  TableItem,\n  TableQueryOptions,\n  TableServiceClientOptions,\n} from \"./models.js\";\nimport type { NamedKeyCredential, SASCredential, TokenCredential } from \"@azure/core-auth\";\nimport { isNamedKeyCredential, isSASCredential, isTokenCredential } from \"@azure/core-auth\";\nimport { COSMOS_SCOPE, STORAGE_SCOPE, TablesLoggingAllowedHeaderNames } from \"./utils/constants.js\";\nimport type { Service, Table } from \"./generated/index.js\";\nimport {\n  injectSecondaryEndpointHeader,\n  tablesSecondaryEndpointPolicy,\n} from \"./secondaryEndpointPolicy.js\";\nimport { parseXML, stringifyXML } from \"@azure/core-xml\";\n\nimport { GeneratedClient } from \"./generated/generatedClient.js\";\nimport type { PagedAsyncIterableIterator } from \"@azure/core-paging\";\nimport type { Pipeline } from \"@azure/core-rest-pipeline\";\nimport type { TableItemResultPage } from \"./models.js\";\nimport { apiVersionPolicy } from \"./utils/apiVersionPolicy.js\";\nimport { getClientParamsFromConnectionString } from \"./utils/connectionString.js\";\nimport { handleTableAlreadyExists } from \"./utils/errorHelpers.js\";\nimport { isCredential } from \"./utils/isCredential.js\";\nimport { logger } from \"./logger.js\";\nimport { setTokenChallengeAuthenticationPolicy } from \"./utils/challengeAuthenticationUtils.js\";\nimport { tablesNamedKeyCredentialPolicy } from \"./tablesNamedCredentialPolicy.js\";\nimport { tablesSASTokenPolicy } from \"./tablesSASTokenPolicy.js\";\nimport { tracingClient } from \"./utils/tracing.js\";\nimport { isCosmosEndpoint } from \"./utils/isCosmosEndpoint.js\";\n\n/**\n * A TableServiceClient represents a Client to the Azure Tables service allowing you\n * to perform operations on the tables and the entities.\n */\nexport class TableServiceClient {\n  /**\n   * Table Account URL\n   */\n  public url: string;\n  /**\n   * Represents a pipeline for making a HTTP request to a URL.\n   * Pipelines can have multiple policies to manage manipulating each request before and after it is made to the server.\n   */\n  public pipeline: Pipeline;\n  private table: Table;\n  private service: Service;\n\n  /**\n   * Creates a new instance of the TableServiceClient class.\n   *\n   * @param url - The URL of the service account that is the target of the desired operation., such as \"https://myaccount.table.core.windows.net\".\n   * @param credential - NamedKeyCredential | SASCredential used to authenticate requests. Only Supported for Node\n   * @param options - Options to configure the HTTP pipeline.\n   *\n   * ### Example using an account name/key:\n   *\n   * ```ts snippet:ReadmeSampleCreateClient_NamedKeyCredential\n   * import { AzureNamedKeyCredential, TableServiceClient } from \"@azure/data-tables\";\n   *\n   * const account = \"<account>\";\n   * const accountKey = \"<accountkey>\";\n   *\n   * const credential = new AzureNamedKeyCredential(account, accountKey);\n   * const serviceClient = new TableServiceClient(\n   *   `https://${account}.table.core.windows.net`,\n   *   credential,\n   * );\n   * ```\n   */\n  constructor(url: string, credential: NamedKeyCredential, options?: TableServiceClientOptions);\n  /**\n   * Creates a new instance of the TableServiceClient class.\n   *\n   * @param url - The URL of the service account that is the target of the desired operation., such as \"https://myaccount.table.core.windows.net\".\n   * @param credential - SASCredential used to authenticate requests\n   * @param options - Options to configure the HTTP pipeline.\n   *\n   * ### Example using a SAS Token.\n   *\n   * ```ts snippet:ReadmeSampleCreateClient_SASToken\n   * import { TableServiceClient, AzureSASCredential } from \"@azure/data-tables\";\n   *\n   * const account = \"<account name>\";\n   * const sas = \"<service Shared Access Signature Token>\";\n   *\n   * const serviceClientWithSAS = new TableServiceClient(\n   *   `https://${account}.table.core.windows.net`,\n   *   new AzureSASCredential(sas),\n   * );\n   * ```\n   */\n  constructor(url: string, credential: SASCredential, options?: TableServiceClientOptions);\n  /**\n   * Creates a new instance of the TableServiceClient class.\n   *\n   * @param url - The URL of the service account that is the target of the desired operation., such as \"https://myaccount.table.core.windows.net\".\n   * @param credential - Azure Active Directory credential used to authenticate requests\n   * @param options - Options to configure the HTTP pipeline.\n   *\n   * ### Example using an Azure Active Directory credential:\n   *\n   * ```ts snippet:ReadmeSampleCreateClient_TokenCredential\n   * import { DefaultAzureCredential } from \"@azure/identity\";\n   * import { TableServiceClient } from \"@azure/data-tables\";\n   *\n   * const credential = new DefaultAzureCredential();\n   * const account = \"<account name>\";\n   *\n   * const clientWithAAD = new TableServiceClient(\n   *   `https://${account}.table.core.windows.net`,\n   *   credential,\n   * );\n   * ```\n   */\n  constructor(url: string, credential: TokenCredential, options?: TableServiceClientOptions);\n  /**\n   * Creates a new instance of the TableServiceClient class.\n   *\n   * @param url - The URL of the service account that is the target of the desired operation., such as\n   *              \"https://myaccount.table.core.windows.net\". You can append a SAS,\n   *              such as \"https://myaccount.table.core.windows.net?sasString\".\n   * @param options - Options to configure the HTTP pipeline.\n   * Example appending a SAS token:\n   *\n   * ```ts snippet:ReadmeSampleCreateClient_SASTokenURL\n   * import { TableServiceClient } from \"@azure/data-tables\";\n   *\n   * const account = \"<account name>\";\n   * const sasToken = \"<SAS token>\";\n   * const tableName = \"<tableName>\";\n   *\n   * const serviceClientWithSASURL = new TableServiceClient(\n   *   `https://${account}.table.core.windows.net?${sasToken}`,\n   * );\n   * ```\n   */\n  constructor(url: string, options?: TableServiceClientOptions);\n  constructor(\n    url: string,\n    credentialOrOptions?:\n      | NamedKeyCredential\n      | SASCredential\n      | TokenCredential\n      | TableServiceClientOptions,\n    options?: TableServiceClientOptions,\n  ) {\n    this.url = url;\n    const isCosmos = isCosmosEndpoint(this.url);\n    const credential = isCredential(credentialOrOptions) ? credentialOrOptions : undefined;\n    const clientOptions =\n      (!isCredential(credentialOrOptions) ? credentialOrOptions : options) || {};\n\n    const internalPipelineOptions: ServiceClientOptions & InternalClientPipelineOptions = {\n      ...clientOptions,\n      endpoint: clientOptions.endpoint || this.url,\n      loggingOptions: {\n        logger: logger.info,\n        additionalAllowedHeaderNames: [...TablesLoggingAllowedHeaderNames],\n      },\n      deserializationOptions: {\n        parseXML,\n      },\n      serializationOptions: {\n        stringifyXML,\n      },\n    };\n    const client = new GeneratedClient(this.url, internalPipelineOptions);\n    client.pipeline.addPolicy(tablesSecondaryEndpointPolicy);\n\n    if (isNamedKeyCredential(credential)) {\n      client.pipeline.addPolicy(tablesNamedKeyCredentialPolicy(credential));\n    } else if (isSASCredential(credential)) {\n      client.pipeline.addPolicy(tablesSASTokenPolicy(credential));\n    }\n\n    if (isTokenCredential(credential)) {\n      const scope = isCosmos ? COSMOS_SCOPE : STORAGE_SCOPE;\n      setTokenChallengeAuthenticationPolicy(client.pipeline, credential, scope);\n    }\n\n    if (options?.version) {\n      client.pipeline.addPolicy(apiVersionPolicy(options.version));\n    }\n\n    this.pipeline = client.pipeline;\n    this.table = client.table;\n    this.service = client.service;\n  }\n\n  /**\n   * Retrieves statistics related to replication for the Table service. It is only available on the\n   * secondary location endpoint when read-access geo-redundant replication is enabled for the account.\n   * @param options - The options parameters.\n   */\n  public async getStatistics(options: OperationOptions = {}): Promise<GetStatisticsResponse> {\n    return tracingClient.withSpan(\"TableServiceClient.getStatistics\", options, (updatedOptions) =>\n      this.service.getStatistics(injectSecondaryEndpointHeader(updatedOptions)),\n    );\n  }\n\n  /**\n   * Gets the properties of an account's Table service, including properties for Analytics and CORS\n   * (Cross-Origin Resource Sharing) rules.\n   * @param options - The options parameters.\n   */\n  public getProperties(options: OperationOptions = {}): Promise<GetPropertiesResponse> {\n    return tracingClient.withSpan(\"TableServiceClient.getProperties\", options, (updatedOptions) =>\n      this.service.getProperties(updatedOptions),\n    );\n  }\n\n  /**\n   * Sets properties for an account's Table service endpoint, including properties for Analytics and CORS\n   * (Cross-Origin Resource Sharing) rules.\n   * @param properties - The Table Service properties.\n   * @param options - The options parameters.\n   */\n  public setProperties(\n    properties: ServiceProperties,\n    options: SetPropertiesOptions = {},\n  ): Promise<SetPropertiesResponse> {\n    return tracingClient.withSpan(\"TableServiceClient.setProperties\", options, (updatedOptions) =>\n      this.service.setProperties(properties, updatedOptions),\n    );\n  }\n\n  /**\n   * Creates a new table under the given account.\n   * @param name - The name of the table.\n   * @param options - The options parameters.\n   */\n  public createTable(name: string, options: OperationOptions = {}): Promise<void> {\n    return tracingClient.withSpan(\n      \"TableServiceClient.createTable\",\n      options,\n      async (updatedOptions) => {\n        try {\n          await this.table.create({ name }, updatedOptions);\n        } catch (e: any) {\n          handleTableAlreadyExists(e, { ...updatedOptions, logger, tableName: name });\n        }\n      },\n    );\n  }\n\n  /**\n   * Operation permanently deletes the specified table.\n   * @param name - The name of the table.\n   * @param options - The options parameters.\n   */\n  public deleteTable(name: string, options: OperationOptions = {}): Promise<void> {\n    return tracingClient.withSpan(\n      \"TableServiceClient.deleteTable\",\n      options,\n      async (updatedOptions) => {\n        try {\n          await this.table.delete(name, updatedOptions);\n        } catch (e: any) {\n          if (e.statusCode === 404) {\n            logger.info(\"TableServiceClient.deleteTable: Table doesn't exist\");\n          } else {\n            throw e;\n          }\n        }\n      },\n    );\n  }\n\n  /**\n   * Queries tables under the given account.\n   * @param options - The options parameters.\n   */\n  public listTables(\n    // eslint-disable-next-line @azure/azure-sdk/ts-naming-options\n    options?: ListTableItemsOptions,\n  ): PagedAsyncIterableIterator<TableItem, TableItemResultPage> {\n    const iter = this.listTablesAll(options);\n\n    return {\n      next() {\n        return iter.next();\n      },\n      [Symbol.asyncIterator]() {\n        return this;\n      },\n      byPage: (settings) => {\n        const pageOptions: InternalListTablesOptions = {\n          ...options,\n          queryOptions: { ...options?.queryOptions, top: settings?.maxPageSize },\n        };\n\n        if (settings?.continuationToken) {\n          pageOptions.continuationToken = settings.continuationToken;\n        }\n\n        return this.listTablesPage(pageOptions);\n      },\n    };\n  }\n\n  private async *listTablesAll(\n    options?: InternalListTablesOptions,\n  ): AsyncIterableIterator<TableItem> {\n    const firstPage = await this._listTables(options);\n    const { continuationToken } = firstPage;\n    yield* firstPage;\n    if (continuationToken) {\n      const optionsWithContinuation: InternalListTablesOptions = {\n        ...options,\n        continuationToken,\n      };\n      for await (const page of this.listTablesPage(optionsWithContinuation)) {\n        yield* page;\n      }\n    }\n  }\n\n  private async *listTablesPage(\n    options: InternalListTablesOptions = {},\n  ): AsyncIterableIterator<TableItemResultPage> {\n    let result = await tracingClient.withSpan(\n      \"TableServiceClient.listTablesPage\",\n      options,\n      (updatedOptions) => this._listTables(updatedOptions),\n    );\n\n    yield result;\n\n    while (result.continuationToken) {\n      const optionsWithContinuation: InternalListTablesOptions = {\n        ...options,\n        continuationToken: result.continuationToken,\n      };\n      result = await tracingClient.withSpan(\n        \"TableServiceClient.listTablesPage\",\n        optionsWithContinuation,\n        async (updatedOptions, span) => {\n          span.setAttribute(\"continuationToken\", updatedOptions.continuationToken);\n          return this._listTables(updatedOptions);\n        },\n      );\n      yield result;\n    }\n  }\n\n  private async _listTables(options: InternalListTablesOptions = {}): Promise<TableItemResultPage> {\n    const { continuationToken: nextTableName, ...listOptions } = options;\n    const { xMsContinuationNextTableName: continuationToken, value = [] } = await this.table.query({\n      ...listOptions,\n      nextTableName,\n    });\n    return Object.assign([...value], { continuationToken });\n  }\n\n  /**\n   *\n   * Creates an instance of TableServiceClient from connection string.\n   *\n   * @param connectionString - Account connection string or a SAS connection string of an Azure storage account.\n   *                           [ Note - Account connection string can only be used in NODE.JS runtime. ]\n   *                           Account connection string example -\n   *                           `DefaultEndpointsProtocol=https;AccountName=myaccount;AccountKey=accountKey;EndpointSuffix=core.windows.net`\n   *                           SAS connection string example -\n   *                           `BlobEndpoint=https://myaccount.table.core.windows.net/;QueueEndpoint=https://myaccount.queue.core.windows.net/;FileEndpoint=https://myaccount.file.core.windows.net/;TableEndpoint=https://myaccount.table.core.windows.net/;SharedAccessSignature=sasString`\n   * @param options - Options to configure the HTTP pipeline.\n   * @returns A new TableServiceClient from the given connection string.\n   */\n  public static fromConnectionString(\n    connectionString: string,\n    // eslint-disable-next-line @azure/azure-sdk/ts-naming-options\n    options?: TableServiceClientOptions,\n  ): TableServiceClient {\n    const {\n      url,\n      options: clientOptions,\n      credential,\n    } = getClientParamsFromConnectionString(connectionString, options);\n\n    if (credential) {\n      return new TableServiceClient(url, credential, clientOptions);\n    } else {\n      return new TableServiceClient(url, clientOptions);\n    }\n  }\n}\n\ntype InternalListTablesOptions = ListTableItemsOptions & {\n  queryOptions?: TableQueryOptions & { top?: number };\n  /**\n   * A table query continuation token from a previous call.\n   */\n  continuationToken?: string;\n};\n"]}